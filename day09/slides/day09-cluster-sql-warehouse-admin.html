<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 9: Cluster & SQL Warehouse Administration | Databricks Admin Training</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f1a 100%); min-height: 100vh; overflow: hidden; }
        .slide-container { width: 100vw; height: 100vh; color: #fff; }
        .slide { display: none; flex-direction: column; padding: 60px 80px; height: 100%; }
        .slide.active { display: flex; }
        .slide-title { font-size: 2.8em; font-weight: 700; margin-bottom: 40px; background: linear-gradient(135deg, #FF3621, #FF6B35); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .bullet-list { list-style: none; }
        .bullet-list li { font-size: 1.4em; margin-bottom: 20px; padding-left: 40px; position: relative; }
        .bullet-list li::before { content: "▸"; color: #FF3621; position: absolute; left: 0; }
        .bullet-list li.sub-item { font-size: 1.2em; margin-left: 40px; color: #ccc; }
        .bullet-list li.sub-item::before { content: "◦"; color: #FF6B35; }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; margin-top: 30px; }
        .column-title { font-size: 1.4em; color: #FF6B35; margin-bottom: 20px; }
        .highlight-box { background: rgba(255, 54, 33, 0.1); border-left: 4px solid #FF3621; padding: 25px; margin: 20px 0; border-radius: 0 8px 8px 0; }
        .highlight-box p { font-size: 1.2em; }
        .progress-bar { position: fixed; bottom: 0; left: 0; height: 4px; background: linear-gradient(90deg, #FF3621, #FF6B35); }
        .slide-counter { position: fixed; bottom: 20px; right: 30px; color: #666; }
        .nav-hint { position: fixed; bottom: 20px; left: 30px; color: #444; font-size: 0.9em; }
        .title-slide { justify-content: center; align-items: center; text-align: center; }
        .title-slide .slide-title { font-size: 3.5em; margin-bottom: 20px; }
        .day-badge { background: linear-gradient(135deg, #FF3621, #FF6B35); color: white; padding: 10px 30px; border-radius: 25px; margin-bottom: 30px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 15px 20px; text-align: left; border-bottom: 1px solid #333; }
        th { background: rgba(255, 54, 33, 0.2); color: #FF6B35; }
        .three-column { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 30px; }
        .info-card { background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 25px; border: 1px solid #333; }
        .info-card h4 { color: #FF6B35; margin-bottom: 15px; }
        .info-card ul { list-style: none; }
        .info-card li { padding: 8px 0; border-bottom: 1px solid #333; font-size: 0.95em; }
        .info-card li:last-child { border-bottom: none; }
        .code-block { background: #0d1117; border: 1px solid #333; border-radius: 8px; padding: 20px; font-family: monospace; margin: 15px 0; font-size: 1em; }
        .warning-box { background: rgba(255, 193, 7, 0.1); border-left: 4px solid #ffc107; padding: 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .warning-box p { font-size: 1.1em; color: #ffc107; }
        .success-box { background: rgba(40, 167, 69, 0.1); border-left: 4px solid #28a745; padding: 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .success-box p { font-size: 1.1em; color: #28a745; }
        .four-column { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="slide-container">
        <!-- Slide 1: Title -->
        <div class="slide active title-slide">
            <div class="day-badge">Day 9 of 13</div>
            <h1 class="slide-title">Cluster & SQL Warehouse Administration</h1>
            <p style="font-size: 1.5em; color: #888;">Databricks Platform Administration Training</p>
            <p style="margin-top: 40px; color: #666;">Duration: 3 Hours</p>
        </div>

        <!-- Slide 2: Agenda -->
        <div class="slide">
            <h1 class="slide-title">Today's Agenda</h1>
            <ul class="bullet-list">
                <li>Cluster Types & Architecture (30 min)</li>
                <li>Cluster Configuration Deep Dive (30 min)</li>
                <li class="sub-item">Break (15 min)</li>
                <li>Cluster Policies (30 min)</li>
                <li>SQL Warehouses (30 min)</li>
                <li>Hands-on Lab: Cluster & Warehouse Setup (45 min)</li>
            </ul>
        </div>

        <!-- Slide 3: Compute Overview -->
        <div class="slide">
            <h1 class="slide-title">Databricks Compute Overview</h1>
            <div class="three-column">
                <div class="info-card">
                    <h4>All-Purpose Clusters</h4>
                    <ul>
                        <li>Interactive development</li>
                        <li>Notebooks & exploration</li>
                        <li>Shared by multiple users</li>
                        <li>Long-running</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Job Clusters</h4>
                    <ul>
                        <li>Production workloads</li>
                        <li>Created per job run</li>
                        <li>Terminated after job</li>
                        <li>Cost-efficient</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>SQL Warehouses</h4>
                    <ul>
                        <li>SQL analytics</li>
                        <li>BI tool connections</li>
                        <li>Dashboards & reports</li>
                        <li>Optimized for queries</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 4: Cluster Architecture -->
        <div class="slide">
            <h1 class="slide-title">Cluster Architecture</h1>
            <div class="highlight-box">
                <p>A cluster consists of a <strong>Driver</strong> node (coordinator) and multiple <strong>Worker</strong> nodes (executors) that process data in parallel.</p>
            </div>
            <div class="two-column" style="margin-top: 20px;">
                <div>
                    <div class="column-title">Driver Node</div>
                    <ul class="bullet-list">
                        <li>Coordinates execution</li>
                        <li>Maintains SparkContext</li>
                        <li>Manages metadata</li>
                        <li>Returns results</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Worker Nodes</div>
                    <ul class="bullet-list">
                        <li>Execute tasks</li>
                        <li>Store cached data</li>
                        <li>Shuffle data</li>
                        <li>Scale horizontally</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 5: Cluster Access Modes -->
        <div class="slide">
            <h1 class="slide-title">Cluster Access Modes</h1>
            <table>
                <tr>
                    <th>Access Mode</th>
                    <th>Description</th>
                    <th>Unity Catalog</th>
                    <th>Use Case</th>
                </tr>
                <tr>
                    <td>Single User</td>
                    <td>Dedicated to one user</td>
                    <td>✓ Supported</td>
                    <td>ML, custom libraries</td>
                </tr>
                <tr>
                    <td>Shared</td>
                    <td>Multiple users with isolation</td>
                    <td>✓ Supported</td>
                    <td>Team development</td>
                </tr>
                <tr>
                    <td>No Isolation Shared</td>
                    <td>Multiple users, no isolation</td>
                    <td>✗ Not supported</td>
                    <td>Legacy, trusted users</td>
                </tr>
            </table>
        </div>

        <!-- Slide 6: Databricks Runtime -->
        <div class="slide">
            <h1 class="slide-title">Databricks Runtime Versions</h1>
            <div class="two-column">
                <div>
                    <div class="column-title">Runtime Types</div>
                    <ul class="bullet-list">
                        <li><strong>Standard</strong> – General purpose</li>
                        <li><strong>ML</strong> – Machine learning</li>
                        <li><strong>Photon</strong> – Accelerated queries</li>
                        <li><strong>GPU</strong> – Deep learning</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Version Strategy</div>
                    <ul class="bullet-list">
                        <li>LTS = Long Term Support</li>
                        <li>Use LTS for production</li>
                        <li>Test before upgrading</li>
                        <li>Check compatibility</li>
                    </ul>
                </div>
            </div>
            <div class="warning-box" style="margin-top: 20px;">
                <p>⚠️ Always use LTS versions for production workloads!</p>
            </div>
        </div>

        <!-- Slide 7: Autoscaling -->
        <div class="slide">
            <h1 class="slide-title">Autoscaling Clusters</h1>
            <div class="highlight-box">
                <p><strong>Autoscaling</strong> automatically adds or removes worker nodes based on workload demand.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>Set <strong>min workers</strong> and <strong>max workers</strong></li>
                <li>Scales up when tasks are pending</li>
                <li>Scales down when resources are idle</li>
                <li>Reduces costs during low-demand periods</li>
            </ul>
            <div class="code-block" style="margin-top: 15px;">
{ "autoscale": { "min_workers": 2, "max_workers": 10 } }
            </div>
        </div>

        <!-- Slide 8: Auto-Termination -->
        <div class="slide">
            <h1 class="slide-title">Auto-Termination</h1>
            <div class="highlight-box">
                <p><strong>Auto-Termination</strong> stops clusters after a period of inactivity to save costs.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>Configurable timeout (10-120 minutes)</li>
                <li>Triggers after no commands running</li>
                <li>Does not affect running jobs</li>
                <li>Critical for cost control!</li>
            </ul>
            <div class="success-box" style="margin-top: 15px;">
                <p>✓ Best Practice: Set auto-termination to 30-60 minutes for dev clusters</p>
            </div>
        </div>

        <!-- Slide 9: Spot Instances -->
        <div class="slide">
            <h1 class="slide-title">Spot/Preemptible Instances</h1>
            <div class="two-column">
                <div>
                    <div class="column-title">Benefits</div>
                    <ul class="bullet-list">
                        <li>60-90% cost savings</li>
                        <li>Use excess cloud capacity</li>
                        <li>Great for batch jobs</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Considerations</div>
                    <ul class="bullet-list">
                        <li>Can be terminated anytime</li>
                        <li>Use for workers only</li>
                        <li>Keep driver on-demand</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 10: Cluster Pools -->
        <div class="slide">
            <h1 class="slide-title">Cluster Pools</h1>
            <div class="highlight-box">
                <p><strong>Cluster Pools</strong> maintain idle instances ready for quick cluster startup, reducing launch time from minutes to seconds.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>Pre-warmed instances ready to attach</li>
                <li>Reduce cluster start time to ~30 seconds</li>
                <li>Configure min/max idle instances</li>
                <li>Shared across multiple clusters</li>
            </ul>
        </div>

        <!-- Slide 11: Cluster Policies -->
        <div class="slide">
            <h1 class="slide-title">Cluster Policies</h1>
            <div class="highlight-box">
                <p><strong>Cluster Policies</strong> define rules that constrain cluster configurations, enforcing governance and controlling costs.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>Limit instance types</li>
                <li>Set max cluster size</li>
                <li>Enforce auto-termination</li>
                <li>Require specific settings</li>
            </ul>
        </div>

        <!-- Slide 12: Policy Attribute Types -->
        <div class="slide">
            <h1 class="slide-title">Policy Attribute Types</h1>
            <table>
                <tr>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td>fixed</td>
                    <td>Cannot be changed</td>
                    <td>Required runtime</td>
                </tr>
                <tr>
                    <td>range</td>
                    <td>Numeric limits</td>
                    <td>Workers 1-10</td>
                </tr>
                <tr>
                    <td>allowlist</td>
                    <td>Specific values only</td>
                    <td>Instance types</td>
                </tr>
                <tr>
                    <td>blocklist</td>
                    <td>Forbidden values</td>
                    <td>Block expensive types</td>
                </tr>
            </table>
        </div>

        <!-- Slide 13: SQL Warehouses -->
        <div class="slide">
            <h1 class="slide-title">SQL Warehouses</h1>
            <div class="highlight-box">
                <p><strong>SQL Warehouses</strong> are optimized compute for SQL analytics, BI tools, and dashboards.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>Optimized for SQL queries</li>
                <li>JDBC/ODBC connectivity</li>
                <li>Auto-scaling based on query load</li>
                <li>Serverless option available</li>
                <li>Built-in query caching</li>
            </ul>
        </div>

        <!-- Slide 14: Warehouse Types -->
        <div class="slide">
            <h1 class="slide-title">SQL Warehouse Types</h1>
            <table>
                <tr>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Best For</th>
                </tr>
                <tr>
                    <td>Serverless</td>
                    <td>Managed by Databricks</td>
                    <td>Production, variable workloads</td>
                </tr>
                <tr>
                    <td>Pro</td>
                    <td>Advanced features</td>
                    <td>Complex queries</td>
                </tr>
                <tr>
                    <td>Classic</td>
                    <td>Basic SQL compute</td>
                    <td>Simple queries, testing</td>
                </tr>
            </table>
        </div>

        <!-- Slide 15: Warehouse Scaling -->
        <div class="slide">
            <h1 class="slide-title">Warehouse Scaling</h1>
            <div class="two-column">
                <div>
                    <div class="column-title">Vertical Scaling</div>
                    <ul class="bullet-list">
                        <li>Increase warehouse size</li>
                        <li>More compute per query</li>
                        <li>Better for complex queries</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Horizontal Scaling</div>
                    <ul class="bullet-list">
                        <li>Add more clusters</li>
                        <li>More concurrent queries</li>
                        <li>Better for high concurrency</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 16: BI Tool Connectivity -->
        <div class="slide">
            <h1 class="slide-title">BI Tool Connectivity</h1>
            <div class="three-column">
                <div class="info-card">
                    <h4>Tableau</h4>
                    <ul>
                        <li>Native connector</li>
                        <li>OAuth support</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Power BI</h4>
                    <ul>
                        <li>Databricks connector</li>
                        <li>DirectQuery mode</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Other</h4>
                    <ul>
                        <li>JDBC/ODBC</li>
                        <li>Standard SQL</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 17: Cost Management -->
        <div class="slide">
            <h1 class="slide-title">Compute Cost Management</h1>
            <ul class="bullet-list">
                <li><strong>Auto-termination</strong> – Stop idle clusters</li>
                <li><strong>Spot instances</strong> – 60-90% savings</li>
                <li><strong>Cluster policies</strong> – Limit expensive configs</li>
                <li><strong>Right-sizing</strong> – Match resources to workload</li>
                <li><strong>Serverless</strong> – Pay only when running</li>
            </ul>
        </div>

        <!-- Slide 18: Lab Introduction -->
        <div class="slide">
            <h1 class="slide-title">Hands-On Lab: Cluster & Warehouse Setup</h1>
            <div class="highlight-box">
                <p><strong>Duration:</strong> 45 minutes</p>
            </div>
            <ul class="bullet-list">
                <li>Create and configure clusters</li>
                <li>Create and apply cluster policies</li>
                <li>Configure cluster pools</li>
                <li>Create SQL warehouses</li>
                <li>Test BI connectivity</li>
            </ul>
        </div>

        <!-- Slide 19: Summary -->
        <div class="slide">
            <h1 class="slide-title">Day 9 Summary</h1>
            <div class="two-column">
                <div>
                    <div class="column-title">Clusters</div>
                    <ul class="bullet-list">
                        <li>All-purpose vs Job clusters</li>
                        <li>Autoscaling & auto-termination</li>
                        <li>Cluster policies</li>
                        <li>Pools for fast starts</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">SQL Warehouses</div>
                    <ul class="bullet-list">
                        <li>SQL analytics optimized</li>
                        <li>Serverless, Pro, Classic</li>
                        <li>Horizontal scaling</li>
                        <li>BI connectivity</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 20: What's Next -->
        <div class="slide">
            <h1 class="slide-title">Coming Up: Day 10</h1>
            <div class="highlight-box">
                <p><strong>Job Orchestration & CI/CD</strong></p>
            </div>
            <ul class="bullet-list">
                <li>Databricks Jobs architecture</li>
                <li>Job scheduling and triggers</li>
                <li>Workflows and orchestration</li>
                <li>CI/CD integration patterns</li>
            </ul>
        </div>

        <!-- Slide 21: Thank You -->
        <div class="slide title-slide">
            <h1 class="slide-title">Thank You!</h1>
            <p style="font-size: 1.5em; color: #888;">See you on Day 10</p>
        </div>
    </div>

    <div class="progress-bar" id="progressBar"></div>
    <div class="slide-counter" id="slideCounter">1 / 21</div>
    <div class="nav-hint">← → Navigate</div>

    <script>
        const slides = document.querySelectorAll('.slide');
        let currentSlide = 0;
        function showSlide(n) {
            if (n < 0) n = 0; if (n >= slides.length) n = slides.length - 1;
            slides.forEach(s => s.classList.remove('active'));
            slides[n].classList.add('active');
            currentSlide = n;
            document.getElementById('progressBar').style.width = ((n + 1) / slides.length) * 100 + '%';
            document.getElementById('slideCounter').textContent = `${n + 1} / ${slides.length}`;
        }
        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight' || e.key === ' ') showSlide(currentSlide + 1);
            else if (e.key === 'ArrowLeft') showSlide(currentSlide - 1);
        });
        document.addEventListener('click', e => {
            e.clientX > window.innerWidth / 2 ? showSlide(currentSlide + 1) : showSlide(currentSlide - 1);
        });
        showSlide(0);
    </script>
</body>
</html>
