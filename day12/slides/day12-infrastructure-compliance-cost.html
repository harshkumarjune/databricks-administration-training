<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 12: Infrastructure, Compliance & Cost Governance | Databricks Admin Training</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f1a 100%); min-height: 100vh; overflow: hidden; }
        .slide-container { width: 100vw; height: 100vh; color: #fff; }
        .slide { display: none; flex-direction: column; padding: 60px 80px; height: 100%; }
        .slide.active { display: flex; }
        .slide-title { font-size: 2.8em; font-weight: 700; margin-bottom: 40px; background: linear-gradient(135deg, #FF3621, #FF6B35); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .bullet-list { list-style: none; }
        .bullet-list li { font-size: 1.4em; margin-bottom: 20px; padding-left: 40px; position: relative; }
        .bullet-list li::before { content: "▸"; color: #FF3621; position: absolute; left: 0; }
        .bullet-list li.sub-item { font-size: 1.2em; margin-left: 40px; color: #ccc; }
        .bullet-list li.sub-item::before { content: "◦"; color: #FF6B35; }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; margin-top: 30px; }
        .column-title { font-size: 1.4em; color: #FF6B35; margin-bottom: 20px; }
        .highlight-box { background: rgba(255, 54, 33, 0.1); border-left: 4px solid #FF3621; padding: 25px; margin: 20px 0; border-radius: 0 8px 8px 0; }
        .highlight-box p { font-size: 1.2em; }
        .progress-bar { position: fixed; bottom: 0; left: 0; height: 4px; background: linear-gradient(90deg, #FF3621, #FF6B35); }
        .slide-counter { position: fixed; bottom: 20px; right: 30px; color: #666; }
        .nav-hint { position: fixed; bottom: 20px; left: 30px; color: #444; font-size: 0.9em; }
        .title-slide { justify-content: center; align-items: center; text-align: center; }
        .title-slide .slide-title { font-size: 3.5em; margin-bottom: 20px; }
        .day-badge { background: linear-gradient(135deg, #FF3621, #FF6B35); color: white; padding: 10px 30px; border-radius: 25px; margin-bottom: 30px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 15px 20px; text-align: left; border-bottom: 1px solid #333; }
        th { background: rgba(255, 54, 33, 0.2); color: #FF6B35; }
        .three-column { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 30px; }
        .info-card { background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 25px; border: 1px solid #333; }
        .info-card h4 { color: #FF6B35; margin-bottom: 15px; }
        .info-card ul { list-style: none; }
        .info-card li { padding: 8px 0; border-bottom: 1px solid #333; font-size: 0.95em; }
        .info-card li:last-child { border-bottom: none; }
        .code-block { background: #0d1117; border: 1px solid #333; border-radius: 8px; padding: 20px; font-family: monospace; margin: 15px 0; font-size: 0.95em; }
        .warning-box { background: rgba(255, 193, 7, 0.1); border-left: 4px solid #ffc107; padding: 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .warning-box p { font-size: 1.1em; color: #ffc107; }
        .success-box { background: rgba(40, 167, 69, 0.1); border-left: 4px solid #28a745; padding: 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .success-box p { font-size: 1.1em; color: #28a745; }
    </style>
</head>
<body>
    <div class="slide-container">
        <!-- Slide 1: Title -->
        <div class="slide active title-slide">
            <div class="day-badge">Day 12 of 13</div>
            <h1 class="slide-title">Infrastructure, Compliance & Cost Governance</h1>
            <p style="font-size: 1.5em; color: #888;">Databricks Platform Administration Training</p>
            <p style="margin-top: 40px; color: #666;">Duration: 3.5 Hours</p>
        </div>

        <!-- Slide 2: Agenda -->
        <div class="slide">
            <h1 class="slide-title">Today's Agenda</h1>
            <ul class="bullet-list">
                <li>Network Security Architecture (45 min)</li>
                <li>Compliance Frameworks (30 min)</li>
                <li class="sub-item">Break (15 min)</li>
                <li>Cost Management & Optimization (45 min)</li>
                <li>Tagging & Chargeback (30 min)</li>
                <li>Hands-on Lab: Cost Analysis (45 min)</li>
            </ul>
        </div>

        <!-- Slide 3: Network Architecture Overview -->
        <div class="slide">
            <h1 class="slide-title">Databricks Network Architecture</h1>
            <div class="two-column">
                <div>
                    <div class="column-title">Control Plane</div>
                    <ul class="bullet-list">
                        <li>Hosted by Databricks</li>
                        <li>Web UI, API, notebooks</li>
                        <li>Job scheduling</li>
                        <li>Cluster management</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Data Plane</div>
                    <ul class="bullet-list">
                        <li>Your cloud account</li>
                        <li>Compute clusters</li>
                        <li>Data storage</li>
                        <li>Network configuration</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 4: Network Security Options -->
        <div class="slide">
            <h1 class="slide-title">Network Security Options</h1>
            <div class="three-column">
                <div class="info-card">
                    <h4>Default Deployment</h4>
                    <ul>
                        <li>Databricks-managed VPC</li>
                        <li>Public subnet</li>
                        <li>Quick setup</li>
                        <li>Basic security</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Customer-Managed VPC</h4>
                    <ul>
                        <li>Your own VPC/VNet</li>
                        <li>Custom subnets</li>
                        <li>Security groups</li>
                        <li>VPC peering</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Private Link</h4>
                    <ul>
                        <li>Private connectivity</li>
                        <li>No public internet</li>
                        <li>Maximum security</li>
                        <li>Enterprise grade</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 5: Private Link -->
        <div class="slide">
            <h1 class="slide-title">Private Link / Private Endpoints</h1>
            <div class="highlight-box">
                <p><strong>Private Link</strong> enables secure connectivity between your VPC and Databricks without traversing the public internet.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>AWS PrivateLink / Azure Private Link / GCP Private Service Connect</li>
                <li>Front-end (UI/API) and back-end (data plane) endpoints</li>
                <li>No public IP addresses required</li>
                <li>Meets strict compliance requirements</li>
            </ul>
        </div>

        <!-- Slide 6: IP Access Lists -->
        <div class="slide">
            <h1 class="slide-title">IP Access Lists</h1>
            <ul class="bullet-list">
                <li>Restrict workspace access to specific IP ranges</li>
                <li>Allowlist corporate networks</li>
                <li>Block unauthorized access</li>
                <li>Configurable at workspace level</li>
            </ul>
            <div class="code-block" style="margin-top: 20px;">
# Example: Allow only corporate IPs<br>
IP Access List: "Corporate Network"<br>
Type: Allow<br>
IP Addresses:<br>
&nbsp;&nbsp;- 10.0.0.0/8<br>
&nbsp;&nbsp;- 192.168.1.0/24<br>
&nbsp;&nbsp;- 203.0.113.50/32
            </div>
        </div>

        <!-- Slide 7: Secure Cluster Connectivity -->
        <div class="slide">
            <h1 class="slide-title">Secure Cluster Connectivity (SCC)</h1>
            <div class="highlight-box">
                <p><strong>Secure Cluster Connectivity</strong> ensures clusters have no public IP addresses and all traffic goes through the control plane.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>No public IPs on cluster nodes</li>
                <li>Traffic routed via NAT gateway</li>
                <li>Enhanced security posture</li>
                <li>Required for many compliance standards</li>
            </ul>
        </div>

        <!-- Slide 8: Data Encryption -->
        <div class="slide">
            <h1 class="slide-title">Data Encryption</h1>
            <table>
                <tr>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Options</th>
                </tr>
                <tr>
                    <td>Data at Rest</td>
                    <td>Cloud provider encryption</td>
                    <td>Customer-managed keys (CMK)</td>
                </tr>
                <tr>
                    <td>Data in Transit</td>
                    <td>TLS 1.2+</td>
                    <td>Always encrypted</td>
                </tr>
                <tr>
                    <td>Managed Services</td>
                    <td>Databricks encryption</td>
                    <td>CMK for notebooks, secrets</td>
                </tr>
            </table>
        </div>

        <!-- Slide 9: Customer-Managed Keys -->
        <div class="slide">
            <h1 class="slide-title">Customer-Managed Keys (CMK)</h1>
            <ul class="bullet-list">
                <li>Use your own encryption keys</li>
                <li>AWS KMS, Azure Key Vault, GCP KMS</li>
                <li>Control key rotation</li>
                <li>Revoke access by disabling keys</li>
                <li>Applies to managed services data</li>
            </ul>
            <div class="warning-box" style="margin-top: 15px;">
                <p>⚠️ Key deletion or disabling will make encrypted data inaccessible!</p>
            </div>
        </div>

        <!-- Slide 10: Compliance Frameworks -->
        <div class="slide">
            <h1 class="slide-title">Compliance Frameworks</h1>
            <div class="three-column">
                <div class="info-card">
                    <h4>Security Standards</h4>
                    <ul>
                        <li>SOC 2 Type II</li>
                        <li>ISO 27001</li>
                        <li>CSA STAR</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Industry Specific</h4>
                    <ul>
                        <li>HIPAA (Healthcare)</li>
                        <li>PCI DSS (Payments)</li>
                        <li>FedRAMP (Government)</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Privacy</h4>
                    <ul>
                        <li>GDPR (EU)</li>
                        <li>CCPA (California)</li>
                        <li>Data residency</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 11: Compliance Features -->
        <div class="slide">
            <h1 class="slide-title">Databricks Compliance Features</h1>
            <ul class="bullet-list">
                <li><strong>Audit Logging</strong> – Track all access and changes</li>
                <li><strong>Unity Catalog</strong> – Centralized governance</li>
                <li><strong>Data Lineage</strong> – Track data provenance</li>
                <li><strong>Access Controls</strong> – Fine-grained permissions</li>
                <li><strong>Encryption</strong> – Data protection at rest and in transit</li>
                <li><strong>Network Security</strong> – Private Link, IP restrictions</li>
            </ul>
        </div>

        <!-- Slide 12: Cost Management Overview -->
        <div class="slide">
            <h1 class="slide-title">Cost Management Overview</h1>
            <div class="highlight-box">
                <p>Databricks costs are primarily driven by <strong>DBU consumption</strong> (Databricks Units) based on compute usage.</p>
            </div>
            <div class="two-column" style="margin-top: 20px;">
                <div>
                    <div class="column-title">Cost Components</div>
                    <ul class="bullet-list">
                        <li>DBU charges (Databricks)</li>
                        <li>Cloud compute (VMs)</li>
                        <li>Cloud storage</li>
                        <li>Data transfer</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Cost Drivers</div>
                    <ul class="bullet-list">
                        <li>Cluster size & type</li>
                        <li>Runtime hours</li>
                        <li>SKU tier (Jobs, SQL, etc.)</li>
                        <li>Region</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 13: DBU Pricing -->
        <div class="slide">
            <h1 class="slide-title">DBU Pricing Model</h1>
            <table>
                <tr>
                    <th>SKU</th>
                    <th>Description</th>
                    <th>Relative Cost</th>
                </tr>
                <tr>
                    <td>Jobs Compute</td>
                    <td>Automated job clusters</td>
                    <td>$</td>
                </tr>
                <tr>
                    <td>Jobs Light Compute</td>
                    <td>Simple jobs, less features</td>
                    <td>$ (lower)</td>
                </tr>
                <tr>
                    <td>All-Purpose Compute</td>
                    <td>Interactive notebooks</td>
                    <td>$$</td>
                </tr>
                <tr>
                    <td>SQL (Classic/Pro)</td>
                    <td>SQL analytics</td>
                    <td>$$</td>
                </tr>
                <tr>
                    <td>SQL Serverless</td>
                    <td>Managed SQL compute</td>
                    <td>$$$</td>
                </tr>
            </table>
        </div>

        <!-- Slide 14: Cost Optimization Strategies -->
        <div class="slide">
            <h1 class="slide-title">Cost Optimization Strategies</h1>
            <ul class="bullet-list">
                <li><strong>Auto-termination</strong> – Stop idle clusters</li>
                <li><strong>Spot instances</strong> – 60-90% savings on workers</li>
                <li><strong>Right-sizing</strong> – Match resources to workload</li>
                <li><strong>Job clusters</strong> – Ephemeral, pay only when running</li>
                <li><strong>Cluster policies</strong> – Enforce limits and standards</li>
                <li><strong>Photon</strong> – Faster queries = less compute time</li>
            </ul>
        </div>

        <!-- Slide 15: Spot/Preemptible Best Practices -->
        <div class="slide">
            <h1 class="slide-title">Spot Instance Best Practices</h1>
            <div class="two-column">
                <div>
                    <div class="column-title">Do</div>
                    <ul class="bullet-list">
                        <li>Use for workers only</li>
                        <li>Enable fallback to on-demand</li>
                        <li>Good for batch jobs</li>
                        <li>Use with autoscaling</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Don't</div>
                    <ul class="bullet-list">
                        <li>Use for driver node</li>
                        <li>Use for streaming (long-running)</li>
                        <li>Rely on without fallback</li>
                        <li>Use for time-sensitive jobs</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 16: Reserved Capacity -->
        <div class="slide">
            <h1 class="slide-title">Committed Use Discounts</h1>
            <div class="highlight-box">
                <p>Commit to annual DBU usage for significant discounts (up to 40% savings).</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>1-year or 3-year commitments</li>
                <li>Predictable budgeting</li>
                <li>Best for steady-state workloads</li>
                <li>Contact Databricks sales for quotes</li>
            </ul>
        </div>

        <!-- Slide 17: Tagging Strategy -->
        <div class="slide">
            <h1 class="slide-title">Tagging Strategy</h1>
            <div class="highlight-box">
                <p><strong>Tags</strong> enable cost allocation, resource management, and chargeback to teams or projects.</p>
            </div>
            <ul class="bullet-list" style="margin-top: 20px;">
                <li>Apply tags to clusters, jobs, pools</li>
                <li>Tags propagate to cloud resources</li>
                <li>Use for billing allocation</li>
                <li>Enforce via cluster policies</li>
            </ul>
        </div>

        <!-- Slide 18: Recommended Tags -->
        <div class="slide">
            <h1 class="slide-title">Recommended Tag Schema</h1>
            <table>
                <tr>
                    <th>Tag Key</th>
                    <th>Purpose</th>
                    <th>Example Values</th>
                </tr>
                <tr>
                    <td>Team</td>
                    <td>Cost allocation to team</td>
                    <td>data-engineering, ml-ops</td>
                </tr>
                <tr>
                    <td>Project</td>
                    <td>Project-level tracking</td>
                    <td>customer-360, fraud-detection</td>
                </tr>
                <tr>
                    <td>Environment</td>
                    <td>Dev/Staging/Prod</td>
                    <td>development, production</td>
                </tr>
                <tr>
                    <td>CostCenter</td>
                    <td>Financial allocation</td>
                    <td>CC-12345</td>
                </tr>
                <tr>
                    <td>Owner</td>
                    <td>Accountability</td>
                    <td>alice@company.com</td>
                </tr>
            </table>
        </div>

        <!-- Slide 19: Enforcing Tags -->
        <div class="slide">
            <h1 class="slide-title">Enforcing Tags via Policies</h1>
            <div class="code-block">
{<br>
&nbsp;&nbsp;"custom_tags.Team": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"type": "fixed",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"value": "data-engineering"<br>
&nbsp;&nbsp;},<br>
&nbsp;&nbsp;"custom_tags.Environment": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"type": "allowlist",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"values": ["development", "staging", "production"],<br>
&nbsp;&nbsp;&nbsp;&nbsp;"defaultValue": "development"<br>
&nbsp;&nbsp;},<br>
&nbsp;&nbsp;"custom_tags.CostCenter": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"type": "regex",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"pattern": "CC-[0-9]{5}"<br>
&nbsp;&nbsp;}<br>
}
            </div>
        </div>

        <!-- Slide 20: Cost Reporting -->
        <div class="slide">
            <h1 class="slide-title">Cost Reporting & Chargeback</h1>
            <div class="code-block">
-- Cost by team (using tags)<br>
SELECT<br>
&nbsp;&nbsp;usage_metadata.custom_tags['Team'] AS team,<br>
&nbsp;&nbsp;sku_name,<br>
&nbsp;&nbsp;SUM(usage_quantity) AS total_dbus<br>
FROM system.billing.usage<br>
WHERE usage_date >= date_trunc('month', current_date())<br>
GROUP BY 1, 2<br>
ORDER BY total_dbus DESC;
            </div>
            <ul class="bullet-list" style="margin-top: 15px;">
                <li>Build dashboards for team visibility</li>
                <li>Export to finance systems</li>
                <li>Set up budget alerts</li>
            </ul>
        </div>

        <!-- Slide 21: Budget Alerts -->
        <div class="slide">
            <h1 class="slide-title">Budget Alerts</h1>
            <ul class="bullet-list">
                <li>Set spending thresholds</li>
                <li>Alert when approaching budget</li>
                <li>Notify team leads and admins</li>
                <li>Integrate with ticketing systems</li>
            </ul>
            <div class="code-block" style="margin-top: 20px;">
-- Alert query: Daily spend exceeds threshold<br>
SELECT<br>
&nbsp;&nbsp;usage_date,<br>
&nbsp;&nbsp;SUM(usage_quantity) AS daily_dbus<br>
FROM system.billing.usage<br>
WHERE usage_date = current_date()<br>
HAVING daily_dbus > 1000 -- threshold
            </div>
        </div>

        <!-- Slide 22: Governance Best Practices -->
        <div class="slide">
            <h1 class="slide-title">Cost Governance Best Practices</h1>
            <ul class="bullet-list">
                <li>Implement <strong>mandatory tagging</strong> via policies</li>
                <li>Create <strong>cost dashboards</strong> for visibility</li>
                <li>Set <strong>budget alerts</strong> for proactive management</li>
                <li>Review <strong>idle resources</strong> weekly</li>
                <li>Use <strong>reserved capacity</strong> for predictable workloads</li>
                <li>Train teams on <strong>cost-aware development</strong></li>
            </ul>
        </div>

        <!-- Slide 23: Lab Introduction -->
        <div class="slide">
            <h1 class="slide-title">Hands-On Lab: Cost Analysis</h1>
            <div class="highlight-box">
                <p><strong>Duration:</strong> 45 minutes</p>
            </div>
            <ul class="bullet-list">
                <li>Query billing usage data</li>
                <li>Analyze cost by team/project</li>
                <li>Create cost allocation report</li>
                <li>Build cost dashboard</li>
                <li>Set up budget alert</li>
            </ul>
            <div class="highlight-box" style="margin-top: 20px;">
                <p><strong>Lab Guide:</strong> LAB_12_Cost_Analysis.md</p>
            </div>
        </div>

        <!-- Slide 24: Summary -->
        <div class="slide">
            <h1 class="slide-title">Day 12 Summary</h1>
            <div class="two-column">
                <div>
                    <div class="column-title">Security & Compliance</div>
                    <ul class="bullet-list">
                        <li>Network architecture options</li>
                        <li>Private Link & SCC</li>
                        <li>Encryption (CMK)</li>
                        <li>Compliance frameworks</li>
                    </ul>
                </div>
                <div>
                    <div class="column-title">Cost Governance</div>
                    <ul class="bullet-list">
                        <li>DBU pricing model</li>
                        <li>Optimization strategies</li>
                        <li>Tagging & chargeback</li>
                        <li>Budget management</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 25: What's Next -->
        <div class="slide">
            <h1 class="slide-title">Coming Up: Day 13</h1>
            <div class="highlight-box">
                <p><strong>Standards, Certification & Wrap-Up</strong></p>
            </div>
            <ul class="bullet-list">
                <li>Administration standards</li>
                <li>Exam preparation</li>
                <li>Course review</li>
                <li>Capstone project</li>
            </ul>
        </div>

        <!-- Slide 26: Thank You -->
        <div class="slide title-slide">
            <h1 class="slide-title">Thank You!</h1>
            <p style="font-size: 1.5em; color: #888;">See you on Day 13</p>
        </div>
    </div>

    <div class="progress-bar" id="progressBar"></div>
    <div class="slide-counter" id="slideCounter">1 / 26</div>
    <div class="nav-hint">← → Navigate</div>

    <script>
        const slides = document.querySelectorAll('.slide');
        let currentSlide = 0;
        function showSlide(n) {
            if (n < 0) n = 0; if (n >= slides.length) n = slides.length - 1;
            slides.forEach(s => s.classList.remove('active'));
            slides[n].classList.add('active');
            currentSlide = n;
            document.getElementById('progressBar').style.width = ((n + 1) / slides.length) * 100 + '%';
            document.getElementById('slideCounter').textContent = `${n + 1} / ${slides.length}`;
        }
        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight' || e.key === ' ') showSlide(currentSlide + 1);
            else if (e.key === 'ArrowLeft') showSlide(currentSlide - 1);
        });
        document.addEventListener('click', e => {
            e.clientX > window.innerWidth / 2 ? showSlide(currentSlide + 1) : showSlide(currentSlide - 1);
        });
        showSlide(0);
    </script>
</body>
</html>
